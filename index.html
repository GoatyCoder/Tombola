<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tombola Nojana</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
    <script defer src="script.js"></script>
  </head>
  <body>
    <header class="hero" role="banner">
      <div class="shell hero__shell">
        <div class="hero__badge" aria-hidden="true">
          <img
            src="images/logo_amicidelteatro.svg"
            alt="Amici del Teatro"
            class="hero__logo"
            loading="lazy"
            decoding="async"
          />
          <span class="hero__presenter">presenta</span>
        </div>
        <div class="hero__content">
          <h1 class="hero__title">Tombola Nojana</h1>
          <p class="hero__lead">
            La tombolata della tradizione nojana diventa digitale con estrazioni
            animate, immagini dedicate e cronologia sempre a portata di mano.
          </p>
        </div>
      </div>
    </header>

    <main class="layout" aria-label="Applicazione Tombola Nojana">
      <section class="dashboard" aria-labelledby="dashboard-heading">
        <div class="shell dashboard__shell">
          <h2 id="dashboard-heading" class="sr-only">Controllo estrazioni</h2>
          <div class="dashboard__grid">
            <article class="status-card status-card--last" role="status" aria-live="polite">
              <p class="status-card__label">Ultimo numero</p>
              <p id="draw-last-number" class="status-card__value" aria-live="polite" aria-atomic="true">—</p>
              <p id="draw-last-detail" class="status-card__detail">In attesa della prima estrazione</p>
            </article>
            <article class="status-card" role="group" aria-labelledby="progress-label">
              <div class="status-card__header">
                <p id="progress-label" class="status-card__label">Numeri estratti</p>
                <button
                  type="button"
                  id="history-toggle"
                  class="chip"
                  aria-expanded="false"
                  aria-controls="history-panel"
                  data-label-mobile-open="Chiudi cronologia"
                  data-label-mobile-closed="Cronologia"
                  data-label-desktop="Cronologia"
                  aria-label="Cronologia"
                  title="Cronologia"
                >
                  <svg class="chip__icon" viewBox="0 0 24 24" role="presentation" aria-hidden="true">
                    <path
                      d="M5.75 4.5h12.5a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H5.75a.75.75 0 0 1-.75-.75V5.25a.75.75 0 0 1 .75-.75Z"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="1.5"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                    <path
                      d="M8 7h8m-8 4h8m-8 4h5"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="1.5"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </svg>
                  <span class="chip__label" data-history-label>Cronologia</span>
                </button>
              </div>
              <p id="draw-progress-value" class="status-card__value">0/0</p>
              <div
                id="draw-progress-bar"
                class="progress"
                role="progressbar"
                aria-valuemin="0"
                aria-valuemax="0"
                aria-valuenow="0"
              >
                <span id="draw-progress-fill" class="progress__fill"></span>
              </div>
              <div class="status-card__actions">
                <button type="button" id="draw-button" class="button button--primary" disabled>
                  Estrai numero
                </button>
                <button type="button" id="reset-button" class="button" disabled>
                  Reset partita
                </button>
              </div>
            </article>
          </div>
        </div>
      </section>

      <section class="board-area" aria-labelledby="board-heading">
        <div class="shell board-area__shell">
          <div class="board-area__layout">
            <div class="board-wrapper">
              <div class="board-head">
                <h2 id="board-heading" class="board-head__title">Tabellone</h2>
                <span id="draw-status" class="board-head__status sr-only">Caricamento del tabellone…</span>
              </div>
              <div class="board-grid" id="board" aria-live="polite"></div>
            </div>
            <aside
              id="history-panel"
              class="history"
              aria-label="Cronologia estrazioni"
              aria-hidden="false"
              tabindex="-1"
            >
              <header class="history__header">
                <h3 class="history__title">Cronologia</h3>
                <p class="history__subtitle">L'ordine completo delle estrazioni.</p>
              </header>
              <p class="history__empty" id="draw-history-empty">Nessun numero estratto finora.</p>
              <ol class="history__list" id="draw-history" aria-live="polite"></ol>
            </aside>
          </div>
        </div>
      </section>

      <section class="sponsor" id="sponsor-showcase" hidden aria-hidden="true">
        <div class="shell sponsor__shell">
          <header class="sponsor__header">
            <p class="sponsor__eyebrow">Sponsor e partner</p>
            <p class="sponsor__copy">Grazie a chi sostiene la Tombola Nojana.</p>
          </header>
          <div class="sponsor__strip" id="sponsor-showcase-list" role="list"></div>
        </div>
      </section>
    </main>

    <div id="history-scrim" class="scrim" hidden aria-hidden="true"></div>

    <div id="draw-portal" class="draw-portal" aria-hidden="true" hidden>
      <div class="draw-portal__scrim" aria-hidden="true"></div>
      <div class="draw-portal__wrapper" role="status" aria-live="assertive">
        <div class="draw-portal__orbits" aria-hidden="true">
          <span class="draw-portal__orbit draw-portal__orbit--primary"></span>
          <span class="draw-portal__orbit draw-portal__orbit--secondary"></span>
          <span class="draw-portal__spark draw-portal__spark--one"></span>
          <span class="draw-portal__spark draw-portal__spark--two"></span>
        </div>
        <div class="draw-portal__ball" id="draw-animation-ball" aria-hidden="true">
          <span class="draw-portal__loader" id="draw-portal-loader" aria-hidden="true">
            <span class="draw-portal__loader-dot"></span>
            <span class="draw-portal__loader-dot"></span>
            <span class="draw-portal__loader-dot"></span>
          </span>
          <span id="draw-animation-number" class="draw-portal__number"></span>
        </div>
        <p class="draw-portal__caption" id="draw-animation-label">Estrazione in corso...</p>
        <div id="draw-sponsor-block" class="draw-portal__sponsor-block" hidden>
          <p id="draw-sponsor-heading" class="draw-portal__sponsor-heading">In collaborazione con</p>
          <a
            id="draw-sponsor"
            class="draw-portal__sponsor-link"
            href="#"
            target="_blank"
            rel="noopener noreferrer"
          >
            <img id="draw-sponsor-logo" alt="" decoding="async" />
          </a>
        </div>
      </div>
    </div>

    <div id="number-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-number" hidden>
      <div class="number-dialog" role="document">
        <header class="number-dialog__header">
          <div class="number-dialog__title">
            <p class="number-dialog__eyebrow">Numero estratto</p>
            <span id="modal-number" class="number-dialog__badge" aria-live="polite"></span>
          </div>
          <button type="button" class="number-dialog__close" aria-label="Chiudi" id="modal-close">
            <span aria-hidden="true">&times;</span>
          </button>
        </header>
        <div class="number-dialog__body">
          <div class="number-dialog__visual">
            <div class="number-dialog__image-frame" id="modal-image-frame">
              <img id="modal-image" alt="" decoding="async" loading="lazy" />
            </div>
          </div>
          <div class="number-dialog__details">
            <section class="number-dialog__listen" aria-labelledby="number-dialog-listen-title">
              <h3 id="number-dialog-listen-title" class="number-dialog__listen-title">Ascolta</h3>
              <div class="number-dialog__listen-grid">
                <div class="number-dialog__listen-item">
                  <button
                    type="button"
                    class="number-dialog__listen-button"
                    id="modal-dialect-play"
                    aria-describedby="modal-dialect"
                    aria-label="Ascolta pronuncia in nojano"
                  >
                    Nojano
                  </button>
                  <p id="modal-dialect" class="number-dialog__phrase sr-only"></p>
                </div>
                <div class="number-dialog__listen-item">
                  <button
                    type="button"
                    class="number-dialog__listen-button number-dialog__listen-button--secondary"
                    id="modal-italian-play"
                    aria-describedby="modal-italian"
                    aria-label="Ascolta pronuncia in italiano"
                  >
                    Italiano
                  </button>
                  <p id="modal-italian" class="number-dialog__phrase sr-only"></p>
                </div>
              </div>
            </section>
            <div class="number-dialog__actions">
              <button type="button" class="number-dialog__action" id="modal-next" hidden>
                Estrai successivo
              </button>
              <button
                type="button"
                class="number-dialog__action number-dialog__action--secondary"
                id="modal-close-secondary"
              >
                Chiudi
              </button>
            </div>
            <footer class="number-dialog__footer">
              <div id="modal-sponsor-block" class="number-dialog__sponsor" hidden>
                <p id="modal-sponsor-heading" class="number-dialog__sponsor-heading">In collaborazione con</p>
                <a
                  id="modal-sponsor"
                  class="number-dialog__sponsor-link"
                  href="#"
                  target="_blank"
                  rel="noopener noreferrer"
                >
                  <img id="modal-sponsor-logo" alt="" decoding="async" loading="lazy" />
                </a>
              </div>
            </footer>
          </div>
        </div>
      </div>
    </div>

    <template id="board-cell-template">
      <button class="board-cell" type="button">
        <img
          class="board-cell__media"
          alt=""
          loading="lazy"
          decoding="async"
          aria-hidden="true"
        />
        <span class="board-cell__token" aria-hidden="true">
          <span class="board-cell__token-number" data-board-token-number></span>
        </span>
        <span class="sr-only" data-board-cell-sr></span>
      </button>
    </template>

    <footer class="app-footer" role="contentinfo">
      <div class="shell app-footer__shell">
        <div class="app-footer__brand">
          <img
            src="images/logo_amicidelteatro_big.svg"
            alt="Associazione Culturale Amici del Teatro di Noicattaro"
            class="app-footer__brand-logo"
            loading="lazy"
            decoding="async"
          />
          <div class="app-footer__copy">
            <p class="app-footer__title">Tombola Nojana</p>
            <p class="app-footer__description">
              La tradizione di Noicattaro incontra un'interfaccia leggera e pronta per ogni schermo.
            </p>
          </div>
        </div>
        <div class="app-footer__meta">
          <p class="app-footer__label">Powered by</p>
          <a
            class="app-footer__meta-link"
            href="mailto:GoatyCoder@proton.me"
            aria-label="Contatta GoatyCoder via email"
          >
            <img
              src="images/logo_goty_coder.png"
              alt="GoatyCoder"
              class="app-footer__meta-logo"
              decoding="async"
              loading="lazy"
            />
          </a>
        </div>
      </div>
    </footer>

    <div class="fab-group" role="presentation">
      <button
        type="button"
        id="floating-draw-button"
        class="fab fab--primary"
        aria-label="Estrai numero"
        title="Estrai numero"
        data-tooltip="Estrai numero"
        disabled
      >
        <svg class="fab__icon" viewBox="0 0 24 24" role="presentation" aria-hidden="true">
          <rect class="fab__die" x="4.5" y="4.5" width="15" height="15" rx="3.5" ry="3.5" />
          <circle class="fab__pip" cx="9.5" cy="9.5" r="1.35" />
          <circle class="fab__pip" cx="14.5" cy="14.5" r="1.35" />
          <circle class="fab__pip" cx="14.5" cy="9.5" r="1.35" />
          <circle class="fab__pip" cx="9.5" cy="14.5" r="1.35" />
          <circle class="fab__pip" cx="12" cy="12" r="1.35" />
        </svg>
        <span class="sr-only" data-floating-draw-sr>Estrai numero</span>
      </button>
      <button
        type="button"
        id="audio-toggle"
        class="fab fab--secondary audio-fab"
        aria-pressed="true"
        aria-label="Disattiva annuncio audio"
        title="Disattiva annuncio audio"
        data-tooltip="Disattiva annuncio audio"
      >
        <span class="sr-only" data-audio-label>Audio attivo</span>
        <svg class="audio-fab__icon" viewBox="0 0 24 24" role="presentation" aria-hidden="true">
          <path class="audio-fab__speaker" d="M5.5 9.5H8l3.5-3.5v12L8 14.5H5.5a1.5 1.5 0 0 1-1.5-1.5v-2a1.5 1.5 0 0 1 1.5-1.5Z" />
          <path class="audio-fab__wave" d="M15.5 9.5a3 3 0 0 1 0 5" />
          <path class="audio-fab__wave audio-fab__wave--strong" d="M17.8 7.8a6 6 0 0 1 0 8.5" />
          <path class="audio-fab__cross" d="M16 9l5 5m0-5-5 5" />
        </svg>
      </button>
    </div>
  </body>
</html>
