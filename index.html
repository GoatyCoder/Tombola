<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tombola Nojana</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Signika:wght@400;600;700&display=swap" rel="stylesheet" />
    <script defer src="https://unpkg.com/html5-qrcode@2.3.7/html5-qrcode.min.js"></script>
    <script defer src="script.js"></script>
  </head>
  <body>
    <header class="app-header">
      <h1>Tombola Nojana</h1>
      <p>Ascolta la pronuncia dei numeri della tombola tradizionale di Noicattaro.</p>
    </header>

    <main class="layout">
      <section class="card" aria-labelledby="scanner-title">
        <div class="card-header">
          <h2 id="scanner-title">Scanner QR</h2>
          <button id="toggle-scanner" type="button" class="primary">
            Avvia scansione
          </button>
        </div>
        <div id="scanner-container" class="scanner-container" hidden>
          <div id="qr-reader" aria-live="polite"></div>
          <button id="close-scanner" type="button" class="secondary">Chiudi</button>
        </div>
        <p class="help-text">Inquadra il QR code presente sulla cartella per ascoltare subito la pronuncia.</p>
      </section>

      <section class="card" aria-labelledby="manual-title">
        <h2 id="manual-title">Inserimento manuale</h2>
        <form id="manual-form">
          <label class="visually-hidden" for="number-input">Numero della tombola</label>
          <input
            id="number-input"
            name="number"
            type="number"
            inputmode="numeric"
            min="1"
            max="90"
            placeholder="Digita un numero (1-90)"
            required
          />
          <button type="submit" class="primary">Ascolta pronuncia</button>
        </form>
        <div id="selection-output" class="selection-output" aria-live="polite"></div>
      </section>

      <section class="card board-panel" aria-labelledby="board-title">
        <div class="card-header board-panel__controls">
          <h2 id="board-title">Estrazione casuale</h2>
          <div class="board-panel__buttons">
            <button id="draw-number" type="button" class="primary">Estrai numero</button>
            <button id="reset-game" type="button" class="secondary">Reset</button>
          </div>
        </div>
        <section class="draw-history" aria-labelledby="draw-history-title">
          <header class="draw-history__header">
            <h3 id="draw-history-title">Numeri estratti</h3>
            <p id="draw-history-empty" class="draw-history__empty" aria-live="polite">
              Nessun numero estratto al momento.
            </p>
          </header>
          <ol id="draw-history-list" class="draw-history__list" aria-live="polite"></ol>
        </section>
      </section>

      <section class="card" aria-labelledby="list-title">
        <div class="card-header">
          <h2 id="list-title">Numeri della Tombola</h2>
          <label class="switch">
            <span>Mostra solo numeri completi</span>
            <input type="checkbox" id="complete-only" />
            <span class="slider"></span>
          </label>
        </div>
        <div id="numbers-list" class="numbers-list" role="list"></div>
      </section>
    </main>

    <template id="number-template">
      <article class="number-card" role="listitem">
        <header>
          <span class="number-badge" aria-hidden="true"></span>
          <h3></h3>
        </header>
        <dl>
          <div>
            <dt>Italiano</dt>
            <dd class="italian"></dd>
          </div>
          <div>
            <dt>Dialetto</dt>
            <dd class="dialect"></dd>
          </div>
        </dl>
        <div class="actions">
          <button type="button" class="secondary play-number">Ascolta</button>
        </div>
      </article>
    </template>

    <footer class="app-footer">
      <p>
        Le pronunce vocali utilizzano la sintesi vocale del dispositivo. Per un risultato ottimale registrare in futuro un parlante nativo del dialetto nojano.
      </p>
    </footer>
  </body>
</html>
