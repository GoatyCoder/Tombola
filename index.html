<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tombola Nojana</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
    <script defer src="script.js"></script>
  </head>
  <body>
    <header class="app-header" role="banner">
      <div class="header-shell">
        <div class="header-brand">
          <div class="header-brand__identity">
            <div class="header-brand__logo">
              <img
                src="images/logo-amici-del-teatro.svg"
                alt="Amici del Teatro - Associazione Culturale Nojana"
                loading="lazy"
              />
            </div>
            <p class="header-brand__name">Amici del Teatro</p>
          </div>
          <div class="header-brand__content">
            <p class="header-brand__eyebrow">Tombola in Vernacolo Nojano</p>
            <h1 class="header-brand__title">Tabellone digitale</h1>
            <p class="header-brand__lead">
              Porta con te la smorfia nojana in versione interattiva: estrai i
              numeri, ascolta le pronunce e condividi l'atmosfera della grande
              tombolata cittadina.
            </p>
          </div>
        </div>
      </div>
    </header>

    <main class="app-main" aria-label="Tabellone principale">
      <section class="board-panel">
        <header class="board-panel__head">
          <div class="board-panel__summary">
            <h2 class="sr-only">Controllo estrazioni</h2>
            <div class="board-summary" role="status" aria-live="polite">
              <span id="draw-status" class="sr-only">Caricamento del tabellone…</span>
              <article class="board-summary__card board-summary__card--highlight">
                <div class="board-summary__header">
                  <p class="board-summary__label">Ultimo numero</p>
                </div>
                <p
                  id="draw-last-number"
                  class="board-summary__number"
                  aria-live="polite"
                  aria-atomic="true"
                >
                  —
                </p>
                <p id="draw-last-detail" class="board-summary__detail">
                  In attesa della prima estrazione
                </p>
              </article>
              <article class="board-summary__card board-summary__card--progress">
                <div class="board-summary__header">
                  <p class="board-summary__label">Numeri estratti</p>
                  <button
                    type="button"
                    id="history-toggle"
                    class="board-summary__icon-button board-summary__icon-button--history"
                    aria-expanded="false"
                    aria-controls="history-panel"
                    data-label-mobile-open="Chiudi cronologia estrazioni"
                    data-label-mobile-closed="Apri cronologia estrazioni"
                    data-label-desktop="Vai alla cronologia estrazioni"
                    aria-label="Apri cronologia estrazioni"
                    title="Apri cronologia estrazioni"
                  >
                    <svg
                      class="board-summary__icon"
                      viewBox="0 0 24 24"
                      role="presentation"
                      aria-hidden="true"
                    >
                      <path
                        d="M5.75 4.5h12.5a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H5.75a.75.75 0 0 1-.75-.75V5.25a.75.75 0 0 1 .75-.75Z"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                      <path
                        d="M8 7h8m-8 4h8m-8 4h5"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                      <path
                        d="M5 4.5l1.5-2m11 2L19 2.5"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                    <span class="board-summary__icon-button-label" data-history-label>
                      Apri cronologia estrazioni
                    </span>
                  </button>
                </div>
                <p id="draw-progress-value" class="board-summary__metric">0/0</p>
                <div
                  id="draw-progress-bar"
                  class="board-summary__progress"
                  role="progressbar"
                  aria-valuemin="0"
                  aria-valuemax="0"
                  aria-valuenow="0"
                >
                  <span class="board-summary__progress-fill" style="width: 0%"></span>
                </div>
                <div class="board-summary__actions">
                  <button
                    type="button"
                    id="draw-button"
                    class="board-panel__draw"
                    disabled
                  >
                    Estrai numero
                  </button>
                  <button
                    type="button"
                    id="reset-button"
                    class="board-panel__reset"
                    disabled
                  >
                    Reset partita
                  </button>
                </div>
              </article>
            </div>
          </div>
        </header>
        <div class="board-panel__body">
          <div class="board-layout">
            <div class="board-layout__grid">
              <div id="board" class="board-grid" aria-live="polite"></div>
            </div>
            <aside
              id="history-panel"
              class="history-panel"
              aria-label="Cronologia estrazioni"
              aria-hidden="false"
              tabindex="-1"
            >
              <header class="history-panel__header">
                <h3>Cronologia estrazioni</h3>
                <p class="history-panel__subtitle">
                  Tieni d'occhio l'ordine di uscita dei numeri.
                </p>
              </header>
              <p class="history-panel__empty" id="draw-history-empty">
                Nessun numero estratto finora.
              </p>
              <ol class="history-list" id="draw-history" aria-live="polite"></ol>
            </aside>
          </div>
        </div>
      </section>
      <section
        class="sponsor-section"
        id="sponsor-showcase"
        hidden
        aria-hidden="true"
      >
        <div class="sponsor-section__content">
          <h2 class="sponsor-section__title">Con il sostegno di</h2>
          <div class="sponsor-gallery" id="sponsor-showcase-list"></div>
        </div>
      </section>
    </main>

    <div
      id="history-scrim"
      class="history-scrim"
      hidden
      aria-hidden="true"
    ></div>

    <div id="draw-animation" class="draw-overlay" aria-hidden="true" hidden>
      <div class="draw-overlay__backdrop" aria-hidden="true"></div>
      <div class="draw-overlay__content" role="status" aria-live="assertive">
        <div class="draw-overlay__stage">
          <div class="draw-overlay__halo" aria-hidden="true"></div>
          <div class="draw-overlay__ball" id="draw-animation-ball" aria-hidden="true">
            <div class="draw-overlay__loader" id="draw-animation-loader" aria-hidden="true">
              <div class="draw-overlay__loader-track">
                <span class="draw-overlay__loader-dot"></span>
                <span class="draw-overlay__loader-dot"></span>
                <span class="draw-overlay__loader-dot"></span>
              </div>
            </div>
            <span id="draw-animation-number" class="draw-overlay__number"></span>
          </div>
          <p class="draw-overlay__label" id="draw-animation-label">
            Estrazione in corso…
          </p>
        </div>
        <div id="draw-sponsor-block" class="draw-overlay__sponsor-block" hidden>
          <p id="draw-sponsor-heading" class="draw-overlay__sponsor-heading">
            Con il sostegno di
          </p>
          <a
            id="draw-sponsor"
            class="draw-overlay__sponsor"
            href="#"
            target="_blank"
            rel="noopener noreferrer"
          >
            <img id="draw-sponsor-logo" alt="" decoding="async" />
          </a>
        </div>
      </div>
    </div>

    <div
      id="number-modal"
      class="modal"
      role="dialog"
      aria-modal="true"
      aria-labelledby="modal-number"
      hidden
    >
      <div class="number-popup">
        <button
          type="button"
          class="number-popup__close"
          aria-label="Chiudi"
          id="modal-close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
        <div class="number-popup__layout">
          <div class="number-popup__media">
            <div class="number-popup__image-frame" id="modal-image-frame">
              <div class="number-popup__image-placeholder" aria-hidden="true">
                <span class="number-popup__placeholder-orb"></span>
              </div>
              <img id="modal-image" alt="" decoding="async" loading="lazy" />
            </div>
          </div>
          <div class="number-popup__details">
            <div class="number-popup__header">
              <p id="modal-number" class="number-popup__number"></p>
            </div>
            <div class="number-popup__phrases">
              <article class="number-popup__phrase number-popup__phrase--dialect">
                <h3 class="number-popup__phrase-title">In nojano</h3>
                <div class="number-popup__text-row">
                  <p
                    id="modal-dialect"
                    class="number-popup__text number-popup__text--dialect"
                  ></p>
                  <button
                    type="button"
                    class="number-popup__play"
                    id="modal-dialect-play"
                    aria-label="Ascolta pronuncia in nojano"
                  >
                    <span aria-hidden="true"></span>
                  </button>
                </div>
              </article>
              <article class="number-popup__phrase number-popup__phrase--italian">
                <h3 class="number-popup__phrase-title">In italiano</h3>
                <div class="number-popup__text-row">
                  <p
                    id="modal-italian"
                    class="number-popup__text number-popup__text--italian"
                  ></p>
                  <button
                    type="button"
                    class="number-popup__play number-popup__play--secondary"
                    id="modal-italian-play"
                    aria-label="Ascolta pronuncia in italiano"
                  >
                    <span aria-hidden="true"></span>
                  </button>
                </div>
              </article>
            </div>
            <div class="number-popup__actions">
              <button type="button" class="number-popup__action" id="modal-next" hidden>
                Estrai successivo
              </button>
            </div>
          </div>
        </div>
        <div class="number-popup__footer">
          <div
            id="modal-sponsor-block"
            class="number-popup__sponsor"
            hidden
            aria-hidden="true"
          >
            <p id="modal-sponsor-heading" class="number-popup__sponsor-heading">
              Con il sostegno di
            </p>
            <a
              id="modal-sponsor"
              class="number-popup__sponsor-link"
              href="#"
              target="_blank"
              rel="noopener noreferrer"
            >
              <img id="modal-sponsor-logo" alt="" decoding="async" loading="lazy" />
            </a>
          </div>
        </div>
      </div>
    </div>

    <template id="board-cell-template">
      <button class="board-cell" type="button">
        <span class="board-cell__number" aria-hidden="true"></span>
      </button>
    </template>

    <footer class="app-footer">
      <div class="app-footer__content">
        <p class="app-footer__credits">
          Iniziativa a cura dell'Associazione Culturale Amici del Teatro di
          Noicattaro.
        </p>
        <a class="app-footer__builder" href="mailto:GoatyCoder@proton.me">
          <span>Powered by</span>
          <img
            src="images/GoatyCoder_Logo.png"
            alt="GoatyCoder"
            loading="lazy"
          />
        </a>
      </div>
    </footer>

    <button
      type="button"
      id="audio-toggle"
      class="board-panel__audio-toggle board-panel__audio-toggle--on audio-fab"
      aria-pressed="true"
      aria-label="Disattiva annuncio audio"
      title="Disattiva annuncio audio"
    >
      <span class="sr-only" data-audio-label>Audio attivo</span>
      <svg
        class="board-panel__audio-icon"
        viewBox="0 0 24 24"
        role="presentation"
        aria-hidden="true"
      >
        <path
          class="board-panel__audio-speaker"
          d="M5.5 9.5H8l3.5-3.5v12L8 14.5H5.5a1.5 1.5 0 0 1-1.5-1.5v-2a1.5 1.5 0 0 1 1.5-1.5Z"
        />
        <path
          class="board-panel__audio-wave"
          d="M15.5 9.5a3 3 0 0 1 0 5"
        />
        <path
          class="board-panel__audio-wave board-panel__audio-wave--strong"
          d="M17.8 7.8a6 6 0 0 1 0 8.5"
        />
        <path
          class="board-panel__audio-cross"
          d="M16 9l5 5m0-5-5 5"
        />
      </svg>
    </button>

  </body>
</html>
